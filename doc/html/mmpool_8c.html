<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Unix-Linux Process Programming Kit (ulppk): ulppk/mmpool.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Unix-Linux Process Programming Kit (ulppk)
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">A set of robust lightweight components for multi-process and/or networked  applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mmpool_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mmpool.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Memory Mapped Buffer Pool Module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;dirent.h&gt;</code><br/>
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="mmpool_8h_source.html">mmpool.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="appenv_8h_source.html">appenv.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="diagnostics_8h_source.html">diagnostics.h</a>&gt;</code><br/>
</div>
<p><a href="mmpool_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a42bb980c58c4dbf289c141d03fbf3577"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#a42bb980c58c4dbf289c141d03fbf3577">mmpool_buffx2refp</a> (<a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *bphp, <a class="el" href="mmpool_8h.html#af9c89c63e54c678d57572603a97df34d">BPOOL_INDEX</a> bpx)</td></tr>
<tr class="separator:a42bb980c58c4dbf289c141d03fbf3577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b9cb9758503f9f1201f806e6786c40a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#a7b9cb9758503f9f1201f806e6786c40a">mmpool_define_pool</a> (char name[<a class="el" href="mmpool_8h.html#ab1c7dc5e75ad9fc419f257e4cab04365">MMPOOL_MAX_POOL_NAME</a>], unsigned short bp_id, size_t max_data_size, unsigned short rqst_capacity)</td></tr>
<tr class="memdesc:a7b9cb9758503f9f1201f806e6786c40a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a buffer pool. If the pool has already been defined, no action is taken. A valid handle is returned. The status will be BPOOL_OPENED_RW to indicate the pool has been opened for read/write.  <a href="#a7b9cb9758503f9f1201f806e6786c40a">More...</a><br/></td></tr>
<tr class="separator:a7b9cb9758503f9f1201f806e6786c40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a9f957a7d32f425f42ec2db49ef54c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#ae5a9f957a7d32f425f42ec2db49ef54c">mmpool_open</a> (char *pool_name)</td></tr>
<tr class="separator:ae5a9f957a7d32f425f42ec2db49ef54c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cbb2d5d39098118ad2b6f3d70098060"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#a3cbb2d5d39098118ad2b6f3d70098060">mmpool_close</a> (<a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *bphp)</td></tr>
<tr class="memdesc:a3cbb2d5d39098118ad2b6f3d70098060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a buffer pool and unmap all associated memory regions.  <a href="#a3cbb2d5d39098118ad2b6f3d70098060">More...</a><br/></td></tr>
<tr class="separator:a3cbb2d5d39098118ad2b6f3d70098060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac9d8cec9e86dbac0fe4e521e23439dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#aac9d8cec9e86dbac0fe4e521e23439dd">mmpool_getbuff</a> (<a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *bphp)</td></tr>
<tr class="memdesc:aac9d8cec9e86dbac0fe4e521e23439dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a buffer from the pool.  <a href="#aac9d8cec9e86dbac0fe4e521e23439dd">More...</a><br/></td></tr>
<tr class="separator:aac9d8cec9e86dbac0fe4e521e23439dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab88bdb549e979e098f4bcbe0cd229847"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#ab88bdb549e979e098f4bcbe0cd229847">mmpool_putbuff</a> (<a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *bphp, <a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *buffp)</td></tr>
<tr class="memdesc:ab88bdb549e979e098f4bcbe0cd229847"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a buffer to the pool.  <a href="#ab88bdb549e979e098f4bcbe0cd229847">More...</a><br/></td></tr>
<tr class="separator:ab88bdb549e979e098f4bcbe0cd229847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc697b6f1df1b3557cd4d86f0727384"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#a4bc697b6f1df1b3557cd4d86f0727384">mmpool_buffer_data</a> (<a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *buff_refp)</td></tr>
<tr class="memdesc:a4bc697b6f1df1b3557cd4d86f0727384"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a buffer reference, return a pointer to the memory mapped data region of the buffer.  <a href="#a4bc697b6f1df1b3557cd4d86f0727384">More...</a><br/></td></tr>
<tr class="separator:a4bc697b6f1df1b3557cd4d86f0727384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9f20f2ffc3828c1a5a8328532ac03d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#aa9f20f2ffc3828c1a5a8328532ac03d1">mmpool_buffer_data2refp</a> (void *datap)</td></tr>
<tr class="memdesc:aa9f20f2ffc3828c1a5a8328532ac03d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a valid buffer data pointer, return a pointer to its buffer reference.  <a href="#aa9f20f2ffc3828c1a5a8328532ac03d1">More...</a><br/></td></tr>
<tr class="separator:aa9f20f2ffc3828c1a5a8328532ac03d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ec6d30e984bd6f1cf3bb3533b12e3c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mmpool_8h.html#a0c142d5c3fd113592173c44a84ca032a">BPMF_STATS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#a0ec6d30e984bd6f1cf3bb3533b12e3c3">mmpool_getstats</a> (<a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *bphp)</td></tr>
<tr class="memdesc:a0ec6d30e984bd6f1cf3bb3533b12e3c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get pointer to buffer pool stats structure.  <a href="#a0ec6d30e984bd6f1cf3bb3533b12e3c3">More...</a><br/></td></tr>
<tr class="separator:a0ec6d30e984bd6f1cf3bb3533b12e3c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58fb4c07a6ec250c7d4c9daf46406f4"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#aa58fb4c07a6ec250c7d4c9daf46406f4">mmpool_zap_pool</a> (<a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *bphp)</td></tr>
<tr class="memdesc:aa58fb4c07a6ec250c7d4c9daf46406f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate all buffers currently out of the pool.  <a href="#aa58fb4c07a6ec250c7d4c9daf46406f4">More...</a><br/></td></tr>
<tr class="separator:aa58fb4c07a6ec250c7d4c9daf46406f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa928d0f2ba844916d6203c6cd74611ac"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#aa928d0f2ba844916d6203c6cd74611ac">mmpool_bpmf_filename</a> (char *pool_name)</td></tr>
<tr class="memdesc:aa928d0f2ba844916d6203c6cd74611ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the symbolic name of a pool, derive the BPMF file name.  <a href="#aa928d0f2ba844916d6203c6cd74611ac">More...</a><br/></td></tr>
<tr class="separator:aa928d0f2ba844916d6203c6cd74611ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb5d919a0e34315b0f6095c0f02cceb"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#afbb5d919a0e34315b0f6095c0f02cceb">mmpool_bpcf_filename</a> (char *pool_name)</td></tr>
<tr class="memdesc:afbb5d919a0e34315b0f6095c0f02cceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the symbolic name of a pool, derive the BPCF file name (contents file)  <a href="#afbb5d919a0e34315b0f6095c0f02cceb">More...</a><br/></td></tr>
<tr class="separator:afbb5d919a0e34315b0f6095c0f02cceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c19f6fe58a1ffe59074091185b87c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#af6c19f6fe58a1ffe59074091185b87c7">mmpool_bpfiles_exist</a> (char *pool_name)</td></tr>
<tr class="separator:af6c19f6fe58a1ffe59074091185b87c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f738e68e534a759f35752b61d983a7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mmpool_8h.html#af9c89c63e54c678d57572603a97df34d">BPOOL_INDEX</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mmpool_8c.html#a2f738e68e534a759f35752b61d983a7a">mmpool_refp2buffx</a> (<a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *buff_refp)</td></tr>
<tr class="separator:a2f738e68e534a759f35752b61d983a7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Memory Mapped Buffer Pool Module. </p>
<p>Memory Mapped Buffer Pool Management.</p>
<p>A buffer pool is a collection of memory blocks which can be allocated and returned to future use by calling applications. I some respects, its operation is reminiscent of standard C library's heap (malloc and free).</p>
<p>But memory allocators behind malloc and free are considerably more sophisticated than a buffer pool. They allow allocation of arbitrarily sized blocks of memory, implement strategies to combat fragementation, etc. (See <a href="http://gee.cs.oswego.edu/dl/html/malloc.html">http://gee.cs.oswego.edu/dl/html/malloc.html</a> for a good discussion.)</p>
<p>Buffer pools are a less flexible but considerably faster memory allocation scheme. The applications code defines one or more pools of fixed size blocks.</p>
<p>A buffer pool is characterized by </p>
<ol>
<li>
A logical name and numberic ID </li>
<li>
The size of the buffers in bytes </li>
<li>
The number of total buffers allocated to the pool </li>
<li>
The number of unused buffers remaining in the pool </li>
</ol>
<p>See <a class="el" href="mmpool_8h.html">mmpool.h</a> for a discussion of the data structures. See the <a class="el" href="mmbuffpool_8c.html" title="Memory mapped buffer pool maintenance utility. ">mmbuffpool.c</a> utility, which is used to create, report, display and zap (clear out) buffer pools.)</p>
<p>This package defines a persistent buffer pool. Buffers are mapped to disk files through the mmfor, mmapfile and mmatom mechanisms.</p>
<p>A buffer pool consists of the following objects</p>
<p>1) A BUFFER POOL MANAGEMENT FILE (BPMF). This contains control structures necessary to manage the allocation and deallocation of buffers. 2) A BUFFER POOL CONTENTS FILE (BPCF). This is a file of fixed length buffers (records).</p>
<p>Both kinds of files are managed as memory mapped files.</p>
<p>The BPMF consists of two deque headers (see <a class="el" href="dqacc_8h.html" title="Double ended queue access support. ">dqacc.h</a>) and an array of deque items. Deque items are indices of buffers in the contents (BPCF) file. The two deque headers represent two sets of buffers. The first set contains the buffers "in the pool", which are available for use. This is called the "in deque", dq_inpool. The second set are the buffers which have been allocated for use and are therefore "out of the pool". This set is called the "out deque", dq_outpool.</p>
<p>Each buffer in the BPCF file consists of a short control header and user specifed data.</p>
<p>Manages pools of memory mapped fixed length records.</p>
<p>BPMF == Buffer Pool Management Files. Contains information used to manage the state of the buffer pool. This structure contains two double ended queues (deques). One deque contains buffer pool indices of those buffers which have not been allocated and are hence "in the pool". The other contains indices of those blocks have have been allocated and are hence "out of the pool" and presumably being used by processes.</p>
<p>BPCF == Buffer Pool Content Files ... contains the actual buffers, an array of fixed length memory blocks. </p>

<p>Definition in file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afbb5d919a0e34315b0f6095c0f02cceb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* mmpool_bpcf_filename </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pool_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the symbolic name of a pool, derive the BPCF file name (contents file) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool_name</td><td>Symbolic name of the pool </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The name of the buffer pool management file (not full path). </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00366">366</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="af6c19f6fe58a1ffe59074091185b87c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mmpool_bpfiles_exist </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pool_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00376">376</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa928d0f2ba844916d6203c6cd74611ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* mmpool_bpmf_filename </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pool_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the symbolic name of a pool, derive the BPMF file name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool_name</td><td>Symbolic name of the pool </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The name of the buffer pool management file (not full path). </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00354">354</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4bc697b6f1df1b3557cd4d86f0727384"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* mmpool_buffer_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *&#160;</td>
          <td class="paramname"><em>buff_refp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a buffer reference, return a pointer to the memory mapped data region of the buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff_refp</td><td>Pointer to a buffer reference structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the memory mapped buffer. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00288">288</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa9f20f2ffc3828c1a5a8328532ac03d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a>* mmpool_buffer_data2refp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a valid buffer data pointer, return a pointer to its buffer reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">datap</td><td>Pointer to the memory mapped buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a buffer reference structure. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00302">302</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="a42bb980c58c4dbf289c141d03fbf3577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> * mmpool_buffx2refp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>bphp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#af9c89c63e54c678d57572603a97df34d">BPOOL_INDEX</a>&#160;</td>
          <td class="paramname"><em>bpx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00616">616</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3cbb2d5d39098118ad2b6f3d70098060"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mmpool_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>bphp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a buffer pool and unmap all associated memory regions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bphp</td><td>Pointer to buffer pool handle structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00215">215</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7b9cb9758503f9f1201f806e6786c40a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a>* mmpool_define_pool </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>name</em>[MMPOOL_MAX_POOL_NAME], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>bp_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>rqst_capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define a buffer pool. If the pool has already been defined, no action is taken. A valid handle is returned. The status will be BPOOL_OPENED_RW to indicate the pool has been opened for read/write. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Symbolic name of the pool </td></tr>
    <tr><td class="paramname">bp_id</td><td>Buffer pool ID assigned by the caller. </td></tr>
    <tr><td class="paramname">max_data_size</td><td>Max number of user bytes to be written to these buffers </td></tr>
    <tr><td class="paramname">rqst_capacity</td><td>Min number of buffers to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to buffer pool handle. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00120">120</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="aac9d8cec9e86dbac0fe4e521e23439dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a>* mmpool_getbuff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>bphp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a buffer from the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bphp</td><td>Pointer to buffer pool handle structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a buffer reference structure. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00239">239</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0ec6d30e984bd6f1cf3bb3533b12e3c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mmpool_8h.html#a0c142d5c3fd113592173c44a84ca032a">BPMF_STATS</a>* mmpool_getstats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>bphp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get pointer to buffer pool stats structure. </p>
<p>This provides the current state of buffer pool status and statistics.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bphp</td><td>Pointer to buffer pool handle structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to buffer pool stats structure. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00317">317</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae5a9f957a7d32f425f42ec2db49ef54c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a>* mmpool_open </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pool_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a buffer pool. If the pool does not exist or another error occurs, this function returns NULL. Otherwise it returns a pointer to a BPOOL_HANDLE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool_name</td><td>Symbolic name of the buffer pool </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00171">171</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab88bdb549e979e098f4bcbe0cd229847"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mmpool_putbuff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>bphp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *&#160;</td>
          <td class="paramname"><em>buffp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a buffer to the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bphp</td><td>Pointer to buffer pool handle structure. </td></tr>
    <tr><td class="paramname">buffp</td><td>Pointer to buffer reference structure of buffer to return </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a buffer reference structure. </dd>
<dd>
0 if successful, non-zero error code otherwise. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00262">262</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2f738e68e534a759f35752b61d983a7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mmpool_8h.html#af9c89c63e54c678d57572603a97df34d">BPOOL_INDEX</a> mmpool_refp2buffx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ac1d859278019b946523decac0f4e9196">BPCF_BUFFER_REF</a> *&#160;</td>
          <td class="paramname"><em>buff_refp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00623">623</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa58fb4c07a6ec250c7d4c9daf46406f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short mmpool_zap_pool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mmpool_8h.html#ae03d04e575f01b611b8f4fc473a6dd2a">BPOOL_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>bphp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocate all buffers currently out of the pool. </p>
<p>Zap 'em clean and put them back in the "in pool" deque.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bphp</td><td>Pointer to buffer pool handle structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>count of items returned to the pool. </dd></dl>

<p>Definition at line <a class="el" href="mmpool_8c_source.html#l00329">329</a> of file <a class="el" href="mmpool_8c_source.html">mmpool.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f97c989b391daa71637b76dbb104447e.html">ulppk</a></li><li class="navelem"><a class="el" href="mmpool_8c.html">mmpool.c</a></li>
    <li class="footer">Generated on Thu Aug 27 2015 00:33:47 for Unix-Linux Process Programming Kit (ulppk) by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
