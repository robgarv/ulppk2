<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Unix-Linux Process Programming Kit (ulppk): ulppk/socketserver.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Unix-Linux Process Programming Kit (ulppk)
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">A set of robust lightweight components for multi-process and/or networked  applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('socketserver_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">socketserver.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A skeletal socket server framework.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;sys/wait.h&gt;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;arpa/inet.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="socketserver_8h_source.html">socketserver.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="diagnostics_8h_source.html">diagnostics.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="signalkit_8h_source.html">signalkit.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cmdargs_8h_source.html">cmdargs.h</a>&quot;</code><br/>
</div>
<p><a href="socketserver_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a24a7df39baa92f201cc4b3363c9269b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#a24a7df39baa92f201cc4b3363c9269b9">ssrvr_new</a> ()</td></tr>
<tr class="memdesc:a24a7df39baa92f201cc4b3363c9269b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function constructs a new socket server handle structure. Personality functions are initialize to stubs.  <a href="#a24a7df39baa92f201cc4b3363c9269b9">More...</a><br/></td></tr>
<tr class="separator:a24a7df39baa92f201cc4b3363c9269b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55037243928240d88775a206f501da6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#a55037243928240d88775a206f501da6b">ssrvr_register_clpf</a> (<a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *pHandle, <a class="el" href="socketserver_8h.html#ae54a889b2c55c9138d924abef8f51d3b">SSRVR_CLPF</a> *clpf)</td></tr>
<tr class="memdesc:a55037243928240d88775a206f501da6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a Command Line Personality Function (CLPF)  <a href="#a55037243928240d88775a206f501da6b">More...</a><br/></td></tr>
<tr class="separator:a55037243928240d88775a206f501da6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab662215cc86e0aa72c4bd66fc7124e4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#ab662215cc86e0aa72c4bd66fc7124e4e">ssrvr_register_ipf</a> (<a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *pHandle, <a class="el" href="socketserver_8h.html#a93d8d401108d91cfcd784619941ac535">SSRVR_IPF</a> *ipf)</td></tr>
<tr class="memdesc:ab662215cc86e0aa72c4bd66fc7124e4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an Initialization Personality Function (IPF)  <a href="#ab662215cc86e0aa72c4bd66fc7124e4e">More...</a><br/></td></tr>
<tr class="separator:ab662215cc86e0aa72c4bd66fc7124e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4efe2c9a4d2757d674f19b6b80b748f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#ab4efe2c9a4d2757d674f19b6b80b748f">ssrvr_register_mpf</a> (<a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *pHandle, <a class="el" href="socketserver_8h.html#a4439dfce658b2313b3a6352eeb6f7e9c">SSRVR_MPF</a> *mpf)</td></tr>
<tr class="memdesc:ab4efe2c9a4d2757d674f19b6b80b748f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a Main Personality Function (MPF)  <a href="#ab4efe2c9a4d2757d674f19b6b80b748f">More...</a><br/></td></tr>
<tr class="separator:ab4efe2c9a4d2757d674f19b6b80b748f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28fff67c7dc41d2f10d5878656446e7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#a28fff67c7dc41d2f10d5878656446e7a">ssrvr_register_ctpf</a> (<a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *pHandle, <a class="el" href="socketserver_8h.html#a54951c949426b1745d6345943b763cf1">SSRVR_CTPF</a> *ctpf)</td></tr>
<tr class="memdesc:a28fff67c7dc41d2f10d5878656446e7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a Child Termination Personality Function (CTPF)  <a href="#a28fff67c7dc41d2f10d5878656446e7a">More...</a><br/></td></tr>
<tr class="separator:a28fff67c7dc41d2f10d5878656446e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a097c24caa6a3ba22e3422bfc55b31cb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#a097c24caa6a3ba22e3422bfc55b31cb0">ssrvr_register_ptpf</a> (<a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *pHandle, <a class="el" href="socketserver_8h.html#aba79a85fcc6b3f7f9e9a2a668309042d">SSRVR_PTPF</a> *ptpf)</td></tr>
<tr class="memdesc:a097c24caa6a3ba22e3422bfc55b31cb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a Parent Termination Personality Function (PTPF)  <a href="#a097c24caa6a3ba22e3422bfc55b31cb0">More...</a><br/></td></tr>
<tr class="separator:a097c24caa6a3ba22e3422bfc55b31cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7bf3f71c25aca640f42d5669ce2347"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#ade7bf3f71c25aca640f42d5669ce2347">ssrvr_start</a> (<a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *pHandle, void *datap, int argc, char *argv[])</td></tr>
<tr class="memdesc:ade7bf3f71c25aca640f42d5669ce2347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the socket server.  <a href="#ade7bf3f71c25aca640f42d5669ce2347">More...</a><br/></td></tr>
<tr class="separator:ade7bf3f71c25aca640f42d5669ce2347"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abfd7055d6d36d153883e6ba685637515"><td class="memItemLeft" align="right" valign="top">struct sockaddr_in&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="socketserver_8c.html#abfd7055d6d36d153883e6ba685637515">local_addr</a></td></tr>
<tr class="separator:abfd7055d6d36d153883e6ba685637515"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A skeletal socket server framework. </p>
<p>See <a class="el" href="socketserver_8h.html" title="A skeletal socket server framework. ">socketserver.h</a> for a overview of the socket server skeleton, command line options it processes, and the life cycle of a socket server. </p>

<p>Definition in file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a24a7df39baa92f201cc4b3363c9269b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a>* ssrvr_new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function constructs a new socket server handle structure. Personality functions are initialize to stubs. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to a socket server handle structure. </dd></dl>

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00207">207</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a55037243928240d88775a206f501da6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssrvr_register_clpf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="socketserver_8h.html#ae54a889b2c55c9138d924abef8f51d3b">SSRVR_CLPF</a> *&#160;</td>
          <td class="paramname"><em>clpf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a Command Line Personality Function (CLPF) </p>
<p>Once a handle is created, personality functions may be registered.</p>
<p>If there are custom command line arguments to add (in addition to the stock command line options ever socket server skeleton must handle), then a CLPF should be implemented and registered by calling this function. The CLPF should simply call the cmdarg_register_option function to register these custom arguments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Pointer to <a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> returned by ssrvr_new </td></tr>
    <tr><td class="paramname">clpf</td><td>Pointer to Command Line Personality Function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00231">231</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28fff67c7dc41d2f10d5878656446e7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssrvr_register_ctpf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="socketserver_8h.html#a54951c949426b1745d6345943b763cf1">SSRVR_CTPF</a> *&#160;</td>
          <td class="paramname"><em>ctpf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a Child Termination Personality Function (CTPF) </p>
<p>Once a handle is created, personality functions may be registered.</p>
<p>The CTPF is called by ssrvr_start after the MPF has returned to the child skeleton. A CTPF should be implemented to perform any "must do" clean up after the MPF has completed processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Pointer to <a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> returned by ssrvr_new </td></tr>
    <tr><td class="paramname">ctpf</td><td>Pointer to Child Termination Personality Function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00279">279</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab662215cc86e0aa72c4bd66fc7124e4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssrvr_register_ipf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="socketserver_8h.html#a93d8d401108d91cfcd784619941ac535">SSRVR_IPF</a> *&#160;</td>
          <td class="paramname"><em>ipf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an Initialization Personality Function (IPF) </p>
<p>The IPF is called by ssrvr_start after the CLPF (Command Line Personality Function) has been called to register any special command line options, and the command line options have been parsed. The CLPF should register those options ONLY. The IPF can read the option values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Pointer to <a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> returned by ssrvr_new </td></tr>
    <tr><td class="paramname">ipf</td><td>Pointer to Initialization Personality Function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00247">247</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab4efe2c9a4d2757d674f19b6b80b748f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssrvr_register_mpf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="socketserver_8h.html#a4439dfce658b2313b3a6352eeb6f7e9c">SSRVR_MPF</a> *&#160;</td>
          <td class="paramname"><em>mpf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a Main Personality Function (MPF) </p>
<p>Once a handle is created, personality functions may be registered.</p>
<p>The MPF is called by ssrvr_start after a socket connection has been accepted. The MPF runs under a child process. The parent process loops to accept a new connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Pointer to <a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> returned by ssrvr_new </td></tr>
    <tr><td class="paramname">mpf</td><td>Pointer to Main Personality Function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00263">263</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a097c24caa6a3ba22e3422bfc55b31cb0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssrvr_register_ptpf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="socketserver_8h.html#aba79a85fcc6b3f7f9e9a2a668309042d">SSRVR_PTPF</a> *&#160;</td>
          <td class="paramname"><em>ptpf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a Parent Termination Personality Function (PTPF) </p>
<p>Once a handle is created, personality functions may be registered.</p>
<p>The PTPF is called by ssrvr_start after main accept loop has been terminated. Loop termination (loop abort) will occur when a SIGTERM is sent to the parent. A PTPF should be implemented to perform any"must do" clean up after the accept loop has been aborted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Pointer to <a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> returned by ssrvr_new </td></tr>
    <tr><td class="paramname">ptpf</td><td>Pointer to Parent Termination Personality Function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00297">297</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
<a class="anchor" id="ade7bf3f71c25aca640f42d5669ce2347"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ssrvr_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the socket server. </p>
<p>Once the required personality functions have been registered, the socket server can be started by calling this function. This function parses command line arguments, drives the calls to the registered personality functions, handles listen socket setup, and accepts connections. To terminate the accept loop, send a SIGTERM to the parent process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Pointer to <a class="el" href="struct_s_s_r_v_r___h_a_n_d_l_e.html">SSRVR_HANDLE</a> returned by ssrvr_new </td></tr>
    <tr><td class="paramname">datap</td><td>Pointer to application data. All personality functions will have access to this pointer. </td></tr>
    <tr><td class="paramname">argc</td><td>Program argument count, as passed to the <a class="el" href="dequetool_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a> funtion </td></tr>
    <tr><td class="paramname">argv</td><td>Array of program argument strings, as passed to the <a class="el" href="dequetool_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a> funciton. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00317">317</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="abfd7055d6d36d153883e6ba685637515"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sockaddr_in local_addr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="socketserver_8c_source.html#l00069">69</a> of file <a class="el" href="socketserver_8c_source.html">socketserver.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f97c989b391daa71637b76dbb104447e.html">ulppk</a></li><li class="navelem"><a class="el" href="socketserver_8c.html">socketserver.c</a></li>
    <li class="footer">Generated on Thu Aug 27 2015 00:33:47 for Unix-Linux Process Programming Kit (ulppk) by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
