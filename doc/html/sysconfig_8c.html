<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Unix-Linux Process Programming Kit (ulppk): ulppk/sysconfig.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Unix-Linux Process Programming Kit (ulppk)
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">A set of robust lightweight components for multi-process and/or networked  applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sysconfig_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sysconfig.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>System configuration support.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="config_8h_source.html">config.h</a>&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;syslog.h&gt;</code><br/>
<code>#include &lt;pwd.h&gt;</code><br/>
<code>#include &lt;grp.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="appenv_8h_source.html">appenv.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="diagnostics_8h_source.html">diagnostics.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mmdeque_8h_source.html">mmdeque.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mmpool_8h_source.html">mmpool.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mmfor_8h_source.html">mmfor.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sysconfig_8h_source.html">sysconfig.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="ulppk__log_8h_source.html">ulppk_log.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="pathinfo_8h_source.html">pathinfo.h</a>&gt;</code><br/>
</div>
<p><a href="sysconfig_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac71a45808e11ebced5a2b31a335a6d43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysconfig_8c.html#ac71a45808e11ebced5a2b31a335a6d43">sysconfig_register_env</a> ()</td></tr>
<tr class="separator:ac71a45808e11ebced5a2b31a335a6d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ad4783bd47c35948566ee77c549da5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysconfig_8c.html#a02ad4783bd47c35948566ee77c549da5">sysconfig_set_logging</a> (int log_dest, const char *appname, int options, int facility)</td></tr>
<tr class="separator:a02ad4783bd47c35948566ee77c549da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d1071e33433e9af577bca440ba932d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_i_n_i_f_i_l_e___n_o_d_e.html">INIFILE_NODE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysconfig_8c.html#af3d1071e33433e9af577bca440ba932d">sysconfig_parse_inifile</a> (const char *appname)</td></tr>
<tr class="separator:af3d1071e33433e9af577bca440ba932d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a25fc5f2b4715717a03ac06e5af543"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysconfig_8c.html#a36a25fc5f2b4715717a03ac06e5af543">sysconfig_read_inifile_int</a> (<a class="el" href="struct_i_n_i_f_i_l_e___n_o_d_e.html">INIFILE_NODE</a> *inifilep, const char *section, const char *name, int defaultval)</td></tr>
<tr class="separator:a36a25fc5f2b4715717a03ac06e5af543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc915150c47d64e7adef75569b00d1ef"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysconfig_8c.html#abc915150c47d64e7adef75569b00d1ef">sysconfig_read_inifile_string</a> (<a class="el" href="struct_i_n_i_f_i_l_e___n_o_d_e.html">INIFILE_NODE</a> *inifilep, const char *section, const char *name, const char *defaultval)</td></tr>
<tr class="separator:abc915150c47d64e7adef75569b00d1ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa58b0044d143bff8713b558a318b678"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysconfig_8c.html#afa58b0044d143bff8713b558a318b678">sysconfig_set_user</a> (char *user)</td></tr>
<tr class="separator:afa58b0044d143bff8713b558a318b678"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>System configuration support. </p>
<p>sysconfig provides a facility for management of environment variables, parsing of system initialization files (.ini files), establishing logging, etc. </p>

<p>Definition in file <a class="el" href="sysconfig_8c_source.html">sysconfig.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af3d1071e33433e9af577bca440ba932d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_i_n_i_f_i_l_e___n_o_d_e.html">INIFILE_NODE</a>* sysconfig_parse_inifile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse the ini file. The function presumes the following environment variables have been set: SYSCONFIG_ETC &ndash; path to configuration settings directory SYSCONFIG_INI_FILE_NAME &ndash; ini file name</p>
<p>appname is just the application name. If null uses value in environment variable SYSCONFIG_APPNAME.</p>
<p>appname is used to form a ini file name that overrides the SYSCONFIG_INI_FILE_NAME setting, if the file exists. The ini file in this case is named [appname].ini If that file is not found, then the value of SYSCONFIG_INI_FILE_NAME is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">appname</td><td>&ndash; application name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to root inifile node on succes, NULL on failure </dd></dl>

<p>Definition at line <a class="el" href="sysconfig_8c_source.html#l00212">212</a> of file <a class="el" href="sysconfig_8c_source.html">sysconfig.c</a>.</p>

</div>
</div>
<a class="anchor" id="a36a25fc5f2b4715717a03ac06e5af543"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sysconfig_read_inifile_int </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_n_i_f_i_l_e___n_o_d_e.html">INIFILE_NODE</a> *&#160;</td>
          <td class="paramname"><em>inifilep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>section</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>defaultval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read an integer variable from the .INI file. A default value is provided by the caller to enforce if the ini file variable is not found of is incorrectly formed. Errors accessing the ini file are logged as warnings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inifilep</td><td>&ndash; ptr to root node of inifile parse tree </td></tr>
    <tr><td class="paramname">section</td><td>&ndash; section name (without brackets, so "foo" not "[foo]") </td></tr>
    <tr><td class="paramname">name</td><td>&ndash; name of the variable </td></tr>
    <tr><td class="paramname">defaultval</td><td>&ndash; the default value to return if error reading ini file variable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Intger value of named variable. </dd></dl>

<p>Definition at line <a class="el" href="sysconfig_8c_source.html#l00390">390</a> of file <a class="el" href="sysconfig_8c_source.html">sysconfig.c</a>.</p>

</div>
</div>
<a class="anchor" id="abc915150c47d64e7adef75569b00d1ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* sysconfig_read_inifile_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_n_i_f_i_l_e___n_o_d_e.html">INIFILE_NODE</a> *&#160;</td>
          <td class="paramname"><em>inifilep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>section</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>defaultval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a string variable from the .INI file. A default value is provided by the caller to enforce if the ini file variable is not found of is incorrectly formed. Errors accessing the ini file are logged as warnings. All returned strings are allocated from the heap and must be subsequently freed when the calling process no longer requires them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inifilep</td><td>&ndash; ptr to root node of inifile parse tree </td></tr>
    <tr><td class="paramname">section</td><td>&ndash; section name (without brackets, so "foo" not "[foo]") </td></tr>
    <tr><td class="paramname">name</td><td>&ndash; name of the variable </td></tr>
    <tr><td class="paramname">defaultval</td><td>&ndash; the default value to return if error reading ini file variable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String value of named variable </dd></dl>

<p>Definition at line <a class="el" href="sysconfig_8c_source.html#l00419">419</a> of file <a class="el" href="sysconfig_8c_source.html">sysconfig.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac71a45808e11ebced5a2b31a335a6d43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sysconfig_register_env </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers environment variables necessary for ULPPK components. Establishes default values. In most cases, you won't want to let it go at that. Either establish these through the shell, or override with .ini files values by defining them in the [environment] section of your .ini files.</p>
<p>These include: </p>
<ul>
<li>
SYSCONFIG_APPNAME &ndash; Name of the application </li>
<li>
SYSCONFIG_CORE_DIR &ndash; Directory into which to write core files </li>
<li>
SYSCONFIG_DATA_DIR &ndash; Data directory </li>
<li>
SYSCONFIG_ETC &ndash; etc directory (location of ini files and misc configuration data) </li>
<li>
SYSCONFIG_INI_FILE_NAME &ndash; Name of the ini file </li>
<li>
MMDQ_DIR_PATH &ndash; Directory for storing application's memory mapped deques </li>
<li>
MMPOOL_ENV_DATA_DIR &ndash; Directory for storing application's memory mapped buffer pools </li>
</ul>

<p>Definition at line <a class="el" href="sysconfig_8c_source.html#l00081">81</a> of file <a class="el" href="sysconfig_8c_source.html">sysconfig.c</a>.</p>

</div>
</div>
<a class="anchor" id="a02ad4783bd47c35948566ee77c549da5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sysconfig_set_logging </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>log_dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>appname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>facility</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set up system logging.</p>
<p>log_dest specifies the log destination and is one of the following values: </p>
<ul>
<li>
ULPPK_LOGMODE_CONSOLE 1 </li>
<li>
ULPPK_LOGMODE_SYSLOG 2 </li>
<li>
ULPPK_LOGMODE_ALL 3 </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_dest</td><td>(see <a class="el" href="ulppk__log_8h.html">ulppk_log.h</a> for details) </td></tr>
    <tr><td class="paramname">appname</td><td>Name of the application (or arbitrary identification string) </td></tr>
    <tr><td class="paramname">options</td><td>&ndash; See syslog(3). Meaningless if log_dest is ULPPK_LOGDEST_CONSOLE </td></tr>
    <tr><td class="paramname">facility</td><td>&ndash; See syslog(3). Meaningless if log_dest is ULPPK_LOGDEST_CONSOLE </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sysconfig_8c_source.html#l00191">191</a> of file <a class="el" href="sysconfig_8c_source.html">sysconfig.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa58b0044d143bff8713b558a318b678"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sysconfig_set_user </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set user and group ID to for the calling process. Calling parameter user specifies the user to set to. Note that group ID is obtained by accessing password data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td>User name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&ndash; 0 on success, non-zero on error. </dd></dl>

<p>Definition at line <a class="el" href="sysconfig_8c_source.html#l00443">443</a> of file <a class="el" href="sysconfig_8c_source.html">sysconfig.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f97c989b391daa71637b76dbb104447e.html">ulppk</a></li><li class="navelem"><a class="el" href="sysconfig_8c.html">sysconfig.c</a></li>
    <li class="footer">Generated on Thu Aug 27 2015 00:33:47 for Unix-Linux Process Programming Kit (ulppk) by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
