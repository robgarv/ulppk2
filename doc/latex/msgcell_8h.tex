\hypertarget{msgcell_8h}{\section{ulppk/msgcell.h File Reference}
\label{msgcell_8h}\index{ulppk/msgcell.\-h@{ulppk/msgcell.\-h}}
}


Declarations for message cell facility.  


{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$sys/stat.\-h$>$}\\*
{\ttfamily \#include $<$semaphore.\-h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct___m_s_g_c_e_l_l}{\-\_\-\-M\-S\-G\-C\-E\-L\-L}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{msgcell_8h_a621fb1215243afbafc8cbc53f7d7641a}{M\-A\-X\-\_\-\-M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-A\-M\-E}~64
\item 
\#define \hyperlink{msgcell_8h_aaffdf4d08c654a3ac395efcfc6bf32d3}{M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-O\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}~0
\item 
\#define \hyperlink{msgcell_8h_ab6eb0c2260ffa93c3ad59064d5d6ebad}{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}~1
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef int \hyperlink{msgcell_8h_afb841d6e1bf259250e82b00f304194f7}{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C} (void $\ast$datap)
\item 
typedef struct \hyperlink{struct___m_s_g_c_e_l_l}{\-\_\-\-M\-S\-G\-C\-E\-L\-L} \hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$ \hyperlink{msgcell_8h_a8171218687f7cbd1ead2a2b1693459cc}{msgcell\-\_\-create} (const char $\ast$name, uint permissions, void $\ast$datap, \hyperlink{msgcell_8h_afb841d6e1bf259250e82b00f304194f7}{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C} $\ast$datacheckfuncp)
\begin{DoxyCompactList}\small\item\em Create a message cell. Typically called by a message cell server (receiver). \end{DoxyCompactList}\item 
\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$ \hyperlink{msgcell_8h_ab1380b772a37022eb9744159b7fd3a9f}{msgcell\-\_\-attach} (const char $\ast$name, void $\ast$datap, \hyperlink{msgcell_8h_afb841d6e1bf259250e82b00f304194f7}{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C} $\ast$datacheckfuncp)
\item 
int \hyperlink{msgcell_8h_a5e405c06ed14391adba2cd513f3e73a0}{msgcell\-\_\-delete} (\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$msgcellp)
\begin{DoxyCompactList}\small\item\em Destroy the message cell. Presumes it has already been closed. \end{DoxyCompactList}\item 
int \hyperlink{msgcell_8h_a54f3a2464af128f32159633885d8ffb1}{msgcell\-\_\-close} (\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$msgcellp)
\begin{DoxyCompactList}\small\item\em Close the message cell. The caller is responsible for closing the application specific data object B\-E\-F\-O\-R\-E calling this function. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{msgcell_8h_af414c9b7cd9d069cc5abc6bcf8a52e0e}{msgcell\-\_\-get\-\_\-data\-\_\-pointer} (\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$msgcellp)
\begin{DoxyCompactList}\small\item\em Retrieve the data pointer from the message cell. \end{DoxyCompactList}\item 
int \hyperlink{msgcell_8h_a322eb945155dab344d8de5cf6a924cbe}{msgcell\-\_\-send} (\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$msgcellp)
\begin{DoxyCompactList}\small\item\em Transmit to a message cell. \end{DoxyCompactList}\item 
int \hyperlink{msgcell_8h_a36182b10105566c26bdb819ee5988bbb}{msgcell\-\_\-rec} (\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$msgcellp)
\item 
int \hyperlink{msgcell_8h_a5281857ee6b1fd175cd6b5e1f14abffc}{msgcell\-\_\-timedrec} (\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$msgcellp, const struct timespec $\ast$timout)
\item 
int \hyperlink{msgcell_8h_a5da1ac0bd2445edb8b48291c54ae013b}{msgcell\-\_\-reset} (\hyperlink{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{M\-S\-G\-C\-E\-L\-L} $\ast$msgcellp)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Declarations for message cell facility. See \hyperlink{msgcell_8c}{msgcell.\-c} for details. 

Definition in file \hyperlink{msgcell_8h_source}{msgcell.\-h}.



\subsection{Macro Definition Documentation}
\hypertarget{msgcell_8h_a621fb1215243afbafc8cbc53f7d7641a}{\index{msgcell.\-h@{msgcell.\-h}!M\-A\-X\-\_\-\-M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-A\-M\-E@{M\-A\-X\-\_\-\-M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-A\-M\-E}}
\index{M\-A\-X\-\_\-\-M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-A\-M\-E@{M\-A\-X\-\_\-\-M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-A\-M\-E}!msgcell.h@{msgcell.\-h}}
\subsubsection[{M\-A\-X\-\_\-\-M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-A\-M\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-A\-X\-\_\-\-M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-A\-M\-E~64}}\label{msgcell_8h_a621fb1215243afbafc8cbc53f7d7641a}


Definition at line 73 of file msgcell.\-h.

\hypertarget{msgcell_8h_ab6eb0c2260ffa93c3ad59064d5d6ebad}{\index{msgcell.\-h@{msgcell.\-h}!M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L@{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}}
\index{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L@{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}!msgcell.h@{msgcell.\-h}}
\subsubsection[{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L~1}}\label{msgcell_8h_ab6eb0c2260ffa93c3ad59064d5d6ebad}


Definition at line 75 of file msgcell.\-h.

\hypertarget{msgcell_8h_aaffdf4d08c654a3ac395efcfc6bf32d3}{\index{msgcell.\-h@{msgcell.\-h}!M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-O\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L@{M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-O\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}}
\index{M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-O\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L@{M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-O\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}!msgcell.h@{msgcell.\-h}}
\subsubsection[{M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-O\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-S\-G\-C\-E\-L\-L\-\_\-\-N\-O\-D\-A\-T\-A\-\_\-\-A\-V\-A\-I\-L~0}}\label{msgcell_8h_aaffdf4d08c654a3ac395efcfc6bf32d3}


Definition at line 74 of file msgcell.\-h.



\subsection{Typedef Documentation}
\hypertarget{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}{\index{msgcell.\-h@{msgcell.\-h}!M\-S\-G\-C\-E\-L\-L@{M\-S\-G\-C\-E\-L\-L}}
\index{M\-S\-G\-C\-E\-L\-L@{M\-S\-G\-C\-E\-L\-L}!msgcell.h@{msgcell.\-h}}
\subsubsection[{M\-S\-G\-C\-E\-L\-L}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf \-\_\-\-M\-S\-G\-C\-E\-L\-L}  {\bf M\-S\-G\-C\-E\-L\-L}}}\label{msgcell_8h_ab374f08df1c05b1837ad2e4f130d3cca}
Message cell structure \hypertarget{msgcell_8h_afb841d6e1bf259250e82b00f304194f7}{\index{msgcell.\-h@{msgcell.\-h}!M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C@{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C}}
\index{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C@{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C}!msgcell.h@{msgcell.\-h}}
\subsubsection[{M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C}]{\setlength{\rightskip}{0pt plus 5cm}typedef int M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C(void $\ast$datap)}}\label{msgcell_8h_afb841d6e1bf259250e82b00f304194f7}
The message cell data check function is provided by the caller to test whether valid data has been written to the message cell. It receives a pointer to the application defined data structure provided by message cell creation and attachment functions, and returns 1 if valid data is detected. See \hyperlink{msgdeque_8c}{msgdeque.\-c} for an example of how this is used. 

Definition at line 85 of file msgcell.\-h.



\subsection{Function Documentation}
\hypertarget{msgcell_8h_ab1380b772a37022eb9744159b7fd3a9f}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-attach@{msgcell\-\_\-attach}}
\index{msgcell\-\_\-attach@{msgcell\-\_\-attach}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-attach}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-S\-G\-C\-E\-L\-L}$\ast$ msgcell\-\_\-attach (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{name, }
\item[{void $\ast$}]{datap, }
\item[{{\bf M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C} $\ast$}]{datacheckfuncp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_ab1380b772a37022eb9744159b7fd3a9f}


Definition at line 124 of file msgcell.\-c.

\hypertarget{msgcell_8h_a54f3a2464af128f32159633885d8ffb1}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-close@{msgcell\-\_\-close}}
\index{msgcell\-\_\-close@{msgcell\-\_\-close}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}int msgcell\-\_\-close (
\begin{DoxyParamCaption}
\item[{{\bf M\-S\-G\-C\-E\-L\-L} $\ast$}]{msgcellp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_a54f3a2464af128f32159633885d8ffb1}


Close the message cell. The caller is responsible for closing the application specific data object B\-E\-F\-O\-R\-E calling this function. 


\begin{DoxyParams}{Parameters}
{\em msgcellp} & Pointer to M\-S\-G\-C\-E\-L\-L structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero on failure. 
\end{DoxyReturn}


Definition at line 161 of file msgcell.\-c.

\hypertarget{msgcell_8h_a8171218687f7cbd1ead2a2b1693459cc}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-create@{msgcell\-\_\-create}}
\index{msgcell\-\_\-create@{msgcell\-\_\-create}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-S\-G\-C\-E\-L\-L}$\ast$ msgcell\-\_\-create (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{name, }
\item[{uint}]{permissions, }
\item[{void $\ast$}]{datap, }
\item[{{\bf M\-S\-G\-C\-E\-L\-L\-\_\-\-D\-A\-T\-A\-C\-H\-E\-C\-K\-\_\-\-F\-U\-N\-C} $\ast$}]{datacheckfuncp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_a8171218687f7cbd1ead2a2b1693459cc}


Create a message cell. Typically called by a message cell server (receiver). 


\begin{DoxyParams}{Parameters}
{\em name} & Character string containing the unique name of the semaphore \\
\hline
{\em permissions} & Unsigned interger. If 0x\-F\-F\-F\-F, then use default permissions of S\-\_\-\-I\-R\-W\-X\-U $\vert$ S\-\_\-\-I\-R\-W\-X\-G. Otherwise permissions contains permissions bits as specified in man page open(2) \\
\hline
{\em datap} & Pointer to data structure/object. This may be N\-U\-L\-L. \\
\hline
{\em datacheckfuncp} & Data check function. returns 1 if data is available, 0 otherwise. If N\-U\-L\-L, the functions msgcell\-\_\-rec and msgcell\-\_\-timedrec presume data is always available. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to a M\-S\-G\-C\-E\-L\-L structure. If an error occurred, the errcode field will contain a errno value. This pointer references memory allocated from the heap. The msgcell\-\_\-delete and msgcell\-\_\-close functions both return this memory. 
\end{DoxyReturn}


Definition at line 93 of file msgcell.\-c.

\hypertarget{msgcell_8h_a5e405c06ed14391adba2cd513f3e73a0}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-delete@{msgcell\-\_\-delete}}
\index{msgcell\-\_\-delete@{msgcell\-\_\-delete}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-delete}]{\setlength{\rightskip}{0pt plus 5cm}int msgcell\-\_\-delete (
\begin{DoxyParamCaption}
\item[{{\bf M\-S\-G\-C\-E\-L\-L} $\ast$}]{msgcellp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_a5e405c06ed14391adba2cd513f3e73a0}


Destroy the message cell. Presumes it has already been closed. 


\begin{DoxyParams}{Parameters}
{\em msgcellp} & Pointer to M\-S\-G\-C\-E\-L\-L structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero on failure. 
\end{DoxyReturn}


Definition at line 147 of file msgcell.\-c.

\hypertarget{msgcell_8h_af414c9b7cd9d069cc5abc6bcf8a52e0e}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-get\-\_\-data\-\_\-pointer@{msgcell\-\_\-get\-\_\-data\-\_\-pointer}}
\index{msgcell\-\_\-get\-\_\-data\-\_\-pointer@{msgcell\-\_\-get\-\_\-data\-\_\-pointer}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-get\-\_\-data\-\_\-pointer}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ msgcell\-\_\-get\-\_\-data\-\_\-pointer (
\begin{DoxyParamCaption}
\item[{{\bf M\-S\-G\-C\-E\-L\-L} $\ast$}]{msgcellp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_af414c9b7cd9d069cc5abc6bcf8a52e0e}


Retrieve the data pointer from the message cell. 


\begin{DoxyParams}{Parameters}
{\em msgcellp} & Pointer to M\-S\-G\-C\-E\-L\-L structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to message cell data structure 
\end{DoxyReturn}


Definition at line 174 of file msgcell.\-c.

\hypertarget{msgcell_8h_a36182b10105566c26bdb819ee5988bbb}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-rec@{msgcell\-\_\-rec}}
\index{msgcell\-\_\-rec@{msgcell\-\_\-rec}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-rec}]{\setlength{\rightskip}{0pt plus 5cm}int msgcell\-\_\-rec (
\begin{DoxyParamCaption}
\item[{{\bf M\-S\-G\-C\-E\-L\-L} $\ast$}]{msgcellp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_a36182b10105566c26bdb819ee5988bbb}
Receive via message cell. Data is not retrieved by this function. This function will not return until data is available as determined by the data check function.

1) Calls the application specific datacheck function provided when msgcell\-\_\-create was called. If the data check function returns true, this function returns immediately. 2) If the data check functions returns false, blocks on sem\-\_\-wait 3) When another process posts to the message cell, sem\-\_\-wait returns and the data check function is again called. If the data check again returns false, the function calls sem\-\_\-wait again. Etc.


\begin{DoxyParams}{Parameters}
{\em msgcellp} & pointer to the message cell structure returned by msgcell\-\_\-create or msgcell\-\_\-attach. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, 1 if error. If error, errno is written to msgcellp-\/$>$errcode 
\end{DoxyReturn}


Definition at line 218 of file msgcell.\-c.

\hypertarget{msgcell_8h_a5da1ac0bd2445edb8b48291c54ae013b}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-reset@{msgcell\-\_\-reset}}
\index{msgcell\-\_\-reset@{msgcell\-\_\-reset}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-reset}]{\setlength{\rightskip}{0pt plus 5cm}int msgcell\-\_\-reset (
\begin{DoxyParamCaption}
\item[{{\bf M\-S\-G\-C\-E\-L\-L} $\ast$}]{msgcellp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_a5da1ac0bd2445edb8b48291c54ae013b}
This functions forces the semaphore to zero. (This will cause a subsequent call to msgcell\-\_\-rec to block.) It can be defeated by unruly msgcell\-\_\-xmt callers.


\begin{DoxyParams}{Parameters}
{\em msgcellp} & pointer to the message cell structure returned by msgcell\-\_\-create or msgcell\-\_\-attach. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero on failure. If an error is detected, errno is written to msgcellp-\/$>$errcode 
\end{DoxyReturn}


Definition at line 278 of file msgcell.\-c.

\hypertarget{msgcell_8h_a322eb945155dab344d8de5cf6a924cbe}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-send@{msgcell\-\_\-send}}
\index{msgcell\-\_\-send@{msgcell\-\_\-send}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-send}]{\setlength{\rightskip}{0pt plus 5cm}int msgcell\-\_\-send (
\begin{DoxyParamCaption}
\item[{{\bf M\-S\-G\-C\-E\-L\-L} $\ast$}]{msgcellp}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_a322eb945155dab344d8de5cf6a924cbe}


Transmit to a message cell. 


\begin{DoxyParams}{Parameters}
{\em msgcellp} & The message cell to transmit to. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, 1 on failure. msgcellp-\/$>$errcode receives the value of errno on failure. If the datacheck function returns false, then this function fails with msgcellp-\/$>$errcode = E\-N\-O\-D\-A\-T\-A 
\end{DoxyReturn}


Definition at line 186 of file msgcell.\-c.

\hypertarget{msgcell_8h_a5281857ee6b1fd175cd6b5e1f14abffc}{\index{msgcell.\-h@{msgcell.\-h}!msgcell\-\_\-timedrec@{msgcell\-\_\-timedrec}}
\index{msgcell\-\_\-timedrec@{msgcell\-\_\-timedrec}!msgcell.h@{msgcell.\-h}}
\subsubsection[{msgcell\-\_\-timedrec}]{\setlength{\rightskip}{0pt plus 5cm}int msgcell\-\_\-timedrec (
\begin{DoxyParamCaption}
\item[{{\bf M\-S\-G\-C\-E\-L\-L} $\ast$}]{msgcellp, }
\item[{const struct timespec $\ast$}]{timeout}
\end{DoxyParamCaption}
)}}\label{msgcell_8h_a5281857ee6b1fd175cd6b5e1f14abffc}
Receive via message cell with timeout. Unlike msgcell\-\_\-rec, will not keep suspending on a sem\-\_\-wait or sem\-\_\-timedwait until data is available.

1) Calls the application specific datacheck function provided when msgcell\-\_\-create was called. If the data check function returns true, this function returns immediately. 2) If the data check functions returns false, blocks on sem\-\_\-timedwait 3) When another process posts to the message cell, or when the timeout period defined in the timespec timeout argument expires, sem\-\_\-timedwait returns and the data check function is again called. If the data check again returns false, the function returns 1 and sets msgcellp-\/$>$errcode to E\-N\-O\-D\-A\-T\-A. If the data check returns true,


\begin{DoxyParams}{Parameters}
{\em msgcellp} & pointer to the message cell structure returned by msgcell\-\_\-create or msgcell\-\_\-attach. \\
\hline
{\em timeout} & specifies how long to wait for a signal before giving up. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/0 if successful, 1 if error. If error, errno is written to msgcellp-\/$>$errcode errcode === E\-N\-O\-D\-A\-T\-A means no data was detected by the data check function. 
\end{DoxyReturn}


Definition at line 249 of file msgcell.\-c.

