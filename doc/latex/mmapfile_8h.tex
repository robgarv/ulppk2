\hypertarget{mmapfile_8h}{\section{ulppk/mmapfile.h File Reference}
\label{mmapfile_8h}\index{ulppk/mmapfile.\-h@{ulppk/mmapfile.\-h}}
}


Higher level functionality for creating, opening, closing, and otherwise managing memory mapped atoms. Uses \hyperlink{mmatom_8c}{mmatom.\-c}.  


{\ttfamily \#include $<$mmatom.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$ \hyperlink{mmapfile_8h_a626b140fa1e809ad245dec7a79c53189}{mmapfile\-\_\-create} (char $\ast$tag, char $\ast$filepath, size\-\_\-t len, \hyperlink{mmatom_8h_accd6d884f022e3962f0b0544cfbc9720}{M\-M\-A\-\_\-\-A\-C\-C\-E\-S\-S\-\_\-\-M\-O\-D\-E\-S} mode, \hyperlink{mmatom_8h_a380e40a5d76cd22ec2ffc236efcc5c59}{M\-M\-A\-\_\-\-M\-A\-P\-\_\-\-F\-L\-A\-G\-S} flags, int permissions)
\begin{DoxyCompactList}\small\item\em Create a memory mapped file. \end{DoxyCompactList}\item 
\hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$ \hyperlink{mmapfile_8h_a92bcb09f2d823b3ef0bf9fda38742c6b}{mmapfile\-\_\-open} (char $\ast$tag, char $\ast$filepath, \hyperlink{mmatom_8h_accd6d884f022e3962f0b0544cfbc9720}{M\-M\-A\-\_\-\-A\-C\-C\-E\-S\-S\-\_\-\-M\-O\-D\-E\-S} mode, \hyperlink{mmatom_8h_a380e40a5d76cd22ec2ffc236efcc5c59}{M\-M\-A\-\_\-\-M\-A\-P\-\_\-\-F\-L\-A\-G\-S} flags)
\begin{DoxyCompactList}\small\item\em Open a previously created memory mapped file. \end{DoxyCompactList}\item 
int \hyperlink{mmapfile_8h_a09e6fdcf276fb63b6208e2fd877a32ee}{mmapfile\-\_\-close} (\hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$mmahp)
\begin{DoxyCompactList}\small\item\em Close a memory mapped file explicitly. \end{DoxyCompactList}\item 
char $\ast$ \hyperlink{mmapfile_8h_afe8067f35301e0d9f72be1778ff3b772}{mmapfile\-\_\-file\-\_\-path} (\hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$mmahp)
\begin{DoxyCompactList}\small\item\em Return the full path name of a memory mapped file atom's disk file. \end{DoxyCompactList}\item 
size\-\_\-t \hyperlink{mmapfile_8h_abbc97822c33651f0f57b101292c5327e}{mmapfile\-\_\-p2fileoffset} (\hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$mmahp, void $\ast$p)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Higher level functionality for creating, opening, closing, and otherwise managing memory mapped atoms. Uses \hyperlink{mmatom_8c}{mmatom.\-c}. First evolution of a memory mapped \char`\"{}atom\char`\"{} (mmatom). This specialization represents a simple memory mapped file. 

Definition in file \hyperlink{mmapfile_8h_source}{mmapfile.\-h}.



\subsection{Function Documentation}
\hypertarget{mmapfile_8h_a09e6fdcf276fb63b6208e2fd877a32ee}{\index{mmapfile.\-h@{mmapfile.\-h}!mmapfile\-\_\-close@{mmapfile\-\_\-close}}
\index{mmapfile\-\_\-close@{mmapfile\-\_\-close}!mmapfile.h@{mmapfile.\-h}}
\subsubsection[{mmapfile\-\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}int mmapfile\-\_\-close (
\begin{DoxyParamCaption}
\item[{{\bf M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$}]{mmahp}
\end{DoxyParamCaption}
)}}\label{mmapfile_8h_a09e6fdcf276fb63b6208e2fd877a32ee}


Close a memory mapped file explicitly. 

Note this will cause any record locks owned by the process to be cleared ... even if it has other references (file descriptors) to the underlying memory mapped atom.

Note also this unmaps the memory mapped atom's address range.


\begin{DoxyParams}{Parameters}
{\em mmahp} & Pointer to \hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} (memory mapped atom handle) of file to close. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Always returns 0 to indicate success. 
\end{DoxyReturn}


Definition at line 125 of file mmapfile.\-c.

\hypertarget{mmapfile_8h_a626b140fa1e809ad245dec7a79c53189}{\index{mmapfile.\-h@{mmapfile.\-h}!mmapfile\-\_\-create@{mmapfile\-\_\-create}}
\index{mmapfile\-\_\-create@{mmapfile\-\_\-create}!mmapfile.h@{mmapfile.\-h}}
\subsubsection[{mmapfile\-\_\-create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E}$\ast$ mmapfile\-\_\-create (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{tag, }
\item[{char $\ast$}]{filepath, }
\item[{size\-\_\-t}]{len, }
\item[{{\bf M\-M\-A\-\_\-\-A\-C\-C\-E\-S\-S\-\_\-\-M\-O\-D\-E\-S}}]{mode, }
\item[{{\bf M\-M\-A\-\_\-\-M\-A\-P\-\_\-\-F\-L\-A\-G\-S}}]{flags, }
\item[{int}]{permissions}
\end{DoxyParamCaption}
)}}\label{mmapfile_8h_a626b140fa1e809ad245dec7a79c53189}


Create a memory mapped file. 

Creates a new disk file reference structure for a memory mapped atom (mmatom), and creates the atom using the disk file reference as the underlying object.


\begin{DoxyParams}{Parameters}
{\em tag} & Just an arbitrary name string \\
\hline
{\em filepath} & Path to the file. \\
\hline
{\em len} & Length of the atom backing data structure (file) in bytes \\
\hline
{\em mode} & See \hyperlink{mmatom_8h}{mmatom.\-h}. Access \\
\hline
{\em flags} & See \hyperlink{mmatom_8h}{mmatom.\-h}. \\
\hline
{\em permissions} & Permissions as defined by open(2) \\
\hline
\end{DoxyParams}


Definition at line 55 of file mmapfile.\-c.

\hypertarget{mmapfile_8h_afe8067f35301e0d9f72be1778ff3b772}{\index{mmapfile.\-h@{mmapfile.\-h}!mmapfile\-\_\-file\-\_\-path@{mmapfile\-\_\-file\-\_\-path}}
\index{mmapfile\-\_\-file\-\_\-path@{mmapfile\-\_\-file\-\_\-path}!mmapfile.h@{mmapfile.\-h}}
\subsubsection[{mmapfile\-\_\-file\-\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ mmapfile\-\_\-file\-\_\-path (
\begin{DoxyParamCaption}
\item[{{\bf M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$}]{mmahp}
\end{DoxyParamCaption}
)}}\label{mmapfile_8h_afe8067f35301e0d9f72be1778ff3b772}


Return the full path name of a memory mapped file atom's disk file. 


\begin{DoxyParams}{Parameters}
{\em mmahp} & Pointer to \hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} (memory mapped atom handle) of file to close. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Full path of the actual disk file. 
\end{DoxyReturn}


Definition at line 136 of file mmapfile.\-c.

\hypertarget{mmapfile_8h_a92bcb09f2d823b3ef0bf9fda38742c6b}{\index{mmapfile.\-h@{mmapfile.\-h}!mmapfile\-\_\-open@{mmapfile\-\_\-open}}
\index{mmapfile\-\_\-open@{mmapfile\-\_\-open}!mmapfile.h@{mmapfile.\-h}}
\subsubsection[{mmapfile\-\_\-open}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E}$\ast$ mmapfile\-\_\-open (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{tag, }
\item[{char $\ast$}]{filepath, }
\item[{{\bf M\-M\-A\-\_\-\-A\-C\-C\-E\-S\-S\-\_\-\-M\-O\-D\-E\-S}}]{mode, }
\item[{{\bf M\-M\-A\-\_\-\-M\-A\-P\-\_\-\-F\-L\-A\-G\-S}}]{flags}
\end{DoxyParamCaption}
)}}\label{mmapfile_8h_a92bcb09f2d823b3ef0bf9fda38742c6b}


Open a previously created memory mapped file. 


\begin{DoxyParams}{Parameters}
{\em tag} & Just an arbitrary name string for the atom \\
\hline
{\em filepath} & Path to the file. \\
\hline
{\em mode} & See \hyperlink{mmatom_8h}{mmatom.\-h}. Access \\
\hline
{\em flags} & See \hyperlink{mmatom_8h}{mmatom.\-h}. \\
\hline
\end{DoxyParams}


Definition at line 82 of file mmapfile.\-c.

\hypertarget{mmapfile_8h_abbc97822c33651f0f57b101292c5327e}{\index{mmapfile.\-h@{mmapfile.\-h}!mmapfile\-\_\-p2fileoffset@{mmapfile\-\_\-p2fileoffset}}
\index{mmapfile\-\_\-p2fileoffset@{mmapfile\-\_\-p2fileoffset}!mmapfile.h@{mmapfile.\-h}}
\subsubsection[{mmapfile\-\_\-p2fileoffset}]{\setlength{\rightskip}{0pt plus 5cm}size\-\_\-t mmapfile\-\_\-p2fileoffset (
\begin{DoxyParamCaption}
\item[{{\bf M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} $\ast$}]{mmahp, }
\item[{void $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{mmapfile_8h_abbc97822c33651f0f57b101292c5327e}
Given a pointer into the memory mapped file's memory region, calculate the offset into the disk file.


\begin{DoxyParams}{Parameters}
{\em mmahp} & Pointer to \hyperlink{struct_m_m_a___h_a_n_d_l_e}{M\-M\-A\-\_\-\-H\-A\-N\-D\-L\-E} (memory mapped atom handle) of file to close. \\
\hline
{\em p} & Pointer to an item in the memory mapped region. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
offset into disk file of the item at pointer p 
\end{DoxyReturn}


Definition at line 148 of file mmapfile.\-c.

