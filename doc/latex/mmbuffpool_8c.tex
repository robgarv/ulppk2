\hypertarget{mmbuffpool_8c}{\section{src/mmbuffpool.c File Reference}
\label{mmbuffpool_8c}\index{src/mmbuffpool.\-c@{src/mmbuffpool.\-c}}
}


Memory mapped buffer pool maintenance utility.  


{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$stdarg.\-h$>$}\\*
{\ttfamily \#include $<$cmdargs.\-h$>$}\\*
{\ttfamily \#include $<$mmpool.\-h$>$}\\*
{\ttfamily \#include $<$appenv.\-h$>$}\\*
{\ttfamily \#include $<$pathinfo.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{mmbuffpool_8c_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Memory mapped buffer pool maintenance utility. mmbuffpool provides features for creating memory mapped buffer pools, resetting to inital state, displaying pool deque contents and reporting on their current state.

Command line options.


\begin{DoxyItemize}
\item -\/p --poolname \-: Buffer pool name 
\item -\/d --pooldir \-: Pool data directory overrides environment setting 
\item -\/c --create \-: Create buffer pool 
\item -\/l --datalength \-: Length of user available data of buffer in bytes (create only)  
\item -\/i --poolid \-: Numeric pool identifier. An integer (default is 1) 
\item -\/\-C --capacity ; Required number of buffers in pool (create only) 
\item -\/r --report \-: Report buffer pool stats 
\item -\/\-D --display ; Display buffer pool deque contents (buffer indices)  
\item -\/z --zap \-: Reset buffer pool to initialized state 
\end{DoxyItemize}

Environment Variables\-:

The buffer pool management code (\hyperlink{mmpool_8c}{mmpool.\-c}) refers to the environment variable M\-M\-P\-O\-O\-L\-\_\-\-D\-A\-T\-A\-\_\-\-D\-I\-R. The user of this program can override this variable by providing the -\/\-P or --pooldir option.

Examples\-:

Assume M\-M\-P\-O\-O\-L\-\_\-\-D\-A\-T\-A\-\_\-\-D\-I\-R=/var/ulppk/memfiles and that the directory exists and the user invoking the utility has proper rwx access to the directory. Assume the user name is ulppkuser. (It could be anything.)

To create a buffer pool consisting of 64 buffers each 4 K long\-:

mmbuffpool -\/c -\/p pool4k -\/l 4096 -\/\-C 64

This will create following files in the /var/ulppk/memfiles directory 
\begin{DoxyPre}
-rw-rwS--- 1 ulppkuser ulppkuser 266240 Jan  6 15:30 pool64k.bpcf
-rw-rwS--- 1 ulppkuser ulppkuser   4096 Jan  6 15:30 pool64k.bpmf
\end{DoxyPre}


To create an identical pool in the /home/ulppkuser directory\-:

mmbuffpool -\/c -\/p pool4k -\/l 4096 -\/\-C 64 -\/d /home/ulppkuser 

Definition in file \hyperlink{mmbuffpool_8c_source}{mmbuffpool.\-c}.



\subsection{Function Documentation}
\hypertarget{mmbuffpool_8c_a0ddf1224851353fc92bfbff6f499fa97}{\index{mmbuffpool.\-c@{mmbuffpool.\-c}!main@{main}}
\index{main@{main}!mmbuffpool.c@{mmbuffpool.\-c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{mmbuffpool_8c_a0ddf1224851353fc92bfbff6f499fa97}


Definition at line 105 of file mmbuffpool.\-c.

